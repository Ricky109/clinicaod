import{u as g,r as i,c as u,a as t,b as I,w as d,v as D,d as O,t as c,e as _,o as v}from"./index-ByBmmahU.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const y={class:"login-wrap"},V={class:"login-card card"},b={class:"field form-floating"},L={class:"field password-field form-floating"},R=["type"],w=["title"],E={class:"mt-2",style:{"text-align":"center"}},h=["disabled"],x={key:0,class:"error-msg mt-1"},S={__name:"Login",setup(k){const p=_(),C=g(),e=i({CNRODNI:"",CCLAVE:""}),r=i(!1),a=i(""),o=i(!1);function N(l){return String(l||"").replace(/\D+/g,"").slice(0,10)}function f(){o.value=!o.value}async function m(){a.value="";try{if(r.value=!0,e.value.CNRODNI=N(e.value.CNRODNI),!e.value.CNRODNI||e.value.CNRODNI.length!==10){a.value="CODIGO INVALIDO";return}if(!e.value.CCLAVE||String(e.value.CCLAVE).trim().length===0){a.value="CLAVE INVALIDA";return}const l={CNRODNI:e.value.CNRODNI,CCLAVE:e.value.CCLAVE};await C.login(l),p.push("/home")}catch(l){a.value=l.message||"Error"}finally{r.value=!1}}return(l,s)=>(v(),u("div",y,[t("div",V,[s[5]||(s[5]=t("div",{class:"brand"},[t("div",{class:"logo"},"UCSM"),t("div",{class:"subtitle"},"CLÍNICA ODONTOLÓGICA")],-1)),t("div",b,[d(t("input",{id:"codigo",class:"input fancy-input",placeholder:" ","onUpdate:modelValue":s[0]||(s[0]=n=>e.value.CNRODNI=n),inputmode:"numeric",pattern:"\\\\d{10}",maxlength:"10",onInput:s[1]||(s[1]=n=>e.value.CNRODNI=e.value.CNRODNI.replace(/[^0-9]/g,"").slice(0,10))},null,544),[[D,e.value.CNRODNI]]),s[3]||(s[3]=t("label",{for:"codigo"},"CÓDIGO",-1))]),t("div",L,[d(t("input",{id:"password",class:"input fancy-input",placeholder:" ","onUpdate:modelValue":s[2]||(s[2]=n=>e.value.CCLAVE=n),type:o.value?"text":"password"},null,8,R),[[O,e.value.CCLAVE]]),s[4]||(s[4]=t("label",{for:"password"},"CONTRASEÑA",-1)),t("span",{class:"eye",onClick:f,title:o.value?"Ocultar contraseña":"Mostrar contraseña"},c(o.value?"🙈":"👁️"),9,w)]),t("div",E,[t("button",{class:"btn btn-primary login-btn",onClick:m,disabled:r.value}," ⎆ Iniciar Sesión ",8,h)]),a.value?(v(),u("p",x,c(a.value),1)):I("",!0)])]))}},G=A(S,[["__scopeId","data-v-9ad445b8"]]);export{G as default};
