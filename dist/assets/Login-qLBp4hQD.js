import{u as g,r,c as i,a,b as I,w as u,v as d,t as y,d as D,o as c}from"./index-CkARCL_c.js";import{_ as h}from"./_plugin-vue_export-helper-DlAUqK2U.js";const A={class:"login-wrap"},O={class:"login-card card"},_={class:"field"},V={class:"field password-field"},b={class:"mt-2",style:{"text-align":"center"}},L=["disabled"],R={key:0,class:"error-msg mt-1"},E={__name:"Login",setup(w){const p=D(),v=g(),e=r({CNRODNI:"",CCLAVE:""}),l=r(!1),n=r("");function C(s){return String(s||"").replace(/\D+/g,"").slice(0,10)}async function m(s){const t=new TextEncoder().encode(s||""),o=await crypto.subtle.digest("SHA-512",t);return Array.from(new Uint8Array(o)).map(f=>f.toString(16).padStart(2,"0")).join("")}async function N(){n.value="";try{if(l.value=!0,e.value.CNRODNI=C(e.value.CNRODNI),!e.value.CNRODNI||e.value.CNRODNI.length!==10){n.value="CODIGO INVALIDO";return}if(!e.value.CCLAVE||String(e.value.CCLAVE).trim().length===0){n.value="CLAVE INVALIDA";return}const s={CNRODNI:e.value.CNRODNI,CCLAVE:await m(String(e.value.CCLAVE))};await v.login(s)%p.push("/home")}catch(s){n.value=s.message||"Error"}finally{l.value=!1}}return(s,t)=>(c(),i("div",A,[a("div",O,[t[4]||(t[4]=a("div",{class:"brand"},[a("div",{class:"logo"},"UCSM"),a("div",{class:"subtitle"},"Clínica Odontológica")],-1)),a("div",_,[u(a("input",{class:"input fancy-input",placeholder:"CODIGO","onUpdate:modelValue":t[0]||(t[0]=o=>e.value.CNRODNI=o),inputmode:"numeric",pattern:"\\\\d{10}",maxlength:"10",onInput:t[1]||(t[1]=o=>e.value.CNRODNI=e.value.CNRODNI.replace(/[^0-9]/g,"").slice(0,10))},null,544),[[d,e.value.CNRODNI]])]),a("div",V,[u(a("input",{class:"input fancy-input",placeholder:"Contraseña","onUpdate:modelValue":t[2]||(t[2]=o=>e.value.CCLAVE=o),type:"password"},null,512),[[d,e.value.CCLAVE]]),t[3]||(t[3]=a("span",{class:"eye","aria-hidden":"true"},"👁️",-1))]),a("div",b,[a("button",{class:"btn btn-primary login-btn",onClick:N,disabled:l.value}," ⎆ Iniciar Sesión ",8,L)]),n.value?(c(),i("p",R,y(n.value),1)):I("",!0)])]))}},B=h(E,[["__scopeId","data-v-62fb4490"]]);export{B as default};
