import{r as m,i as d,c as o,a as n,b,e as N,f,g as E,w as r,v as p,t as P,j as l,n as V,o as i,h as _}from"./index-CkARCL_c.js";import{u as x}from"./pacienteStore-Dn8Rq2XC.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./pagoService-Dg7UhO3v.js";const M={class:"card"},D={class:"mt-2",style:{"text-align":"center"}},U={class:"grid grid-2"},w={style:{"text-align":"center"}},A=["disabled"],L={key:0,style:{color:"#b91c1c"}},S={key:1,class:"mt-2"},T={class:"grid grid-1"},$=["readonly"],j=["value"],z=["value"],G=["value"],q={key:0,class:"mt-2"},F={class:"mt-2"},H={__name:"BuscarPaciente",setup(J){const e=x(),c=m(""),v=m(!1),u=m("");async function g(){try{u.value="",v.value=!0,await e.buscarPaciente(c.value),e.nuevo&&(e.paciente.apellido1="",e.paciente.apellido2="",e.paciente.nombres="",e.paciente.CNROCEL="")}catch(a){u.value=a.message}finally{v.value=!1}}async function k(){try{u.value="",e.paciente.CNOMBRE=`${e.paciente.apellido1||""}/${e.paciente.apellido2||""}/${e.paciente.nombres||""}`,await e.registrarPaciente(e.paciente)}catch(a){u.value=a.message}}const y=d(()=>!e.nuevo&&!!e.paciente),B=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[0]||""}),O=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[1]||""}),R=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[2]||""});return(a,t)=>{const C=E("router-link");return i(),o("div",M,[t[14]||(t[14]=n("h2",null,"Buscar/Registrar Paciente",-1)),n("div",D,[N(C,{class:"btn btn-secondary",to:"/home"},{default:f(()=>[...t[6]||(t[6]=[_("INICIO",-1)])]),_:1})]),n("div",U,[r(n("input",{class:"input",placeholder:"DNI Paciente","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s)},null,512),[[p,c.value]]),n("div",w,[n("button",{class:"btn btn-primary",onClick:g,disabled:v.value}," Buscar ",8,A)])]),u.value?(i(),o("p",L,P(u.value),1)):b("",!0),l(e).paciente?(i(),o("div",S,[t[13]||(t[13]=n("h3",null,"Datos del Paciente",-1)),n("div",T,[t[7]||(t[7]=n("label",null,"DNI:",-1)),r(n("input",{class:V(["input",y.value?"input-readonly":""]),"onUpdate:modelValue":t[1]||(t[1]=s=>l(e).paciente.CNRODNI=s),readonly:y.value},null,10,$),[[p,l(e).paciente.CNRODNI]]),t[8]||(t[8]=n("label",null,"Primer Apellido:",-1)),l(e).nuevo?r((i(),o("input",{key:0,class:"input","onUpdate:modelValue":t[2]||(t[2]=s=>l(e).paciente.apellido1=s)},null,512)),[[p,l(e).paciente.apellido1]]):(i(),o("input",{key:1,class:"input input-readonly",value:B.value,readonly:""},null,8,j)),t[9]||(t[9]=n("label",null,"Segundo Apellido:",-1)),l(e).nuevo?r((i(),o("input",{key:2,class:"input","onUpdate:modelValue":t[3]||(t[3]=s=>l(e).paciente.apellido2=s)},null,512)),[[p,l(e).paciente.apellido2]]):(i(),o("input",{key:3,class:"input input-readonly",value:O.value,readonly:""},null,8,z)),t[10]||(t[10]=n("label",null,"Nombres:",-1)),l(e).nuevo?r((i(),o("input",{key:4,class:"input","onUpdate:modelValue":t[4]||(t[4]=s=>l(e).paciente.nombres=s)},null,512)),[[p,l(e).paciente.nombres]]):(i(),o("input",{key:5,class:"input input-readonly",value:R.value,readonly:""},null,8,G)),t[11]||(t[11]=n("label",null,"Celular:",-1)),r(n("input",{class:"input","onUpdate:modelValue":t[5]||(t[5]=s=>l(e).paciente.CNROCEL=s)},null,512),[[p,l(e).paciente.CNROCEL]])]),l(e).nuevo?(i(),o("div",q,[n("button",{class:"btn btn-primary",onClick:k},"Guardar Paciente")])):b("",!0),n("div",F,[N(C,{class:"btn btn-success",to:"/atencion"},{default:f(()=>[...t[12]||(t[12]=[_("Tratamiento",-1)])]),_:1})])])):b("",!0)])}}},Y=I(H,[["__scopeId","data-v-b430b914"]]);export{Y as default};
