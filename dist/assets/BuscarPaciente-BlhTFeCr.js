import{r as m,e as d,c as i,a as n,b,w as r,v as p,f as C,g as f,h as _,t as V,i as l,o,j as g}from"./index-BGuMLfz2.js";import{u as P}from"./pacienteStore-C4SKrChi.js";import"./pagoService-Dg7UhO3v.js";const M={class:"card"},x={class:"grid grid-2"},A={class:"flex flex-col gap-2"},D=["disabled"],I={key:0,style:{color:"#b91c1c"}},L={key:1,class:"mt-2"},S={class:"grid grid-1"},U=["readonly"],w=["value"],$=["value"],T=["value"],j=["readonly"],G={key:0,class:"mt-2"},q={class:"mt-2"},K={__name:"BuscarPaciente",setup(z){const e=P(),c=m(""),v=m(!1),u=m("");async function k(){try{u.value="",v.value=!0,await e.buscarPaciente(c.value),e.nuevo&&(e.paciente.apellido1="",e.paciente.apellido2="",e.paciente.nombres="",e.paciente.CNROCEL="")}catch(a){u.value=a.message}finally{v.value=!1}}async function R(){try{u.value="",e.paciente.CNOMBRE=`${e.paciente.apellido1||""}/${e.paciente.apellido2||""}/${e.paciente.nombres||""}`,await e.registrarPaciente(e.paciente)}catch(a){u.value=a.message}}const y=d(()=>!e.nuevo&&!!e.paciente),B=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[0]||""}),O=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[1]||""}),E=d(()=>{var a;return(a=e.paciente)!=null&&a.CNOMBRE&&e.paciente.CNOMBRE.split("/")[2]||""});return(a,t)=>{const N=_("router-link");return o(),i("div",M,[t[14]||(t[14]=n("h2",null,"Buscar/Registrar Paciente",-1)),n("div",x,[r(n("input",{class:"input",placeholder:"DNI Paciente","onUpdate:modelValue":t[0]||(t[0]=s=>c.value=s)},null,512),[[p,c.value]]),n("div",A,[n("button",{class:"btn btn-primary",onClick:k,disabled:v.value},"Buscar",8,D),C(N,{class:"btn btn-primary btn-SALIR",to:"/"},{default:f(()=>[...t[6]||(t[6]=[g("SALIR",-1)])]),_:1})])]),u.value?(o(),i("p",I,V(u.value),1)):b("",!0),l(e).paciente?(o(),i("div",L,[t[13]||(t[13]=n("h3",null,"Datos del Paciente",-1)),n("div",S,[t[7]||(t[7]=n("label",null,"DNI:",-1)),r(n("input",{class:"input","onUpdate:modelValue":t[1]||(t[1]=s=>l(e).paciente.CNRODNI=s),readonly:y.value},null,8,U),[[p,l(e).paciente.CNRODNI]]),t[8]||(t[8]=n("label",null,"Primer Apellido:",-1)),l(e).nuevo?r((o(),i("input",{key:0,class:"input","onUpdate:modelValue":t[2]||(t[2]=s=>l(e).paciente.apellido1=s)},null,512)),[[p,l(e).paciente.apellido1]]):(o(),i("input",{key:1,class:"input",value:B.value,readonly:""},null,8,w)),t[9]||(t[9]=n("label",null,"Segundo Apellido:",-1)),l(e).nuevo?r((o(),i("input",{key:2,class:"input","onUpdate:modelValue":t[3]||(t[3]=s=>l(e).paciente.apellido2=s)},null,512)),[[p,l(e).paciente.apellido2]]):(o(),i("input",{key:3,class:"input",value:O.value,readonly:""},null,8,$)),t[10]||(t[10]=n("label",null,"Nombres:",-1)),l(e).nuevo?r((o(),i("input",{key:4,class:"input","onUpdate:modelValue":t[4]||(t[4]=s=>l(e).paciente.nombres=s)},null,512)),[[p,l(e).paciente.nombres]]):(o(),i("input",{key:5,class:"input",value:E.value,readonly:""},null,8,T)),t[11]||(t[11]=n("label",null,"Celular:",-1)),r(n("input",{class:"input","onUpdate:modelValue":t[5]||(t[5]=s=>l(e).paciente.CNROCEL=s),readonly:y.value},null,8,j),[[p,l(e).paciente.CNROCEL]])]),l(e).nuevo?(o(),i("div",G,[n("button",{class:"btn btn-primary",onClick:R},"Guardar Paciente")])):b("",!0),n("div",q,[C(N,{class:"btn btn-secondary",to:"/atencion"},{default:f(()=>[...t[12]||(t[12]=[g("Siguiente: AtenciÃ³n",-1)])]),_:1})])])):b("",!0)])}}};export{K as default};
